<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
    <title>Paperclip::Interpolations</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../css/reset.css" type="text/css" media="screen" />
    <link rel="stylesheet" href="../../css/main.css" type="text/css" media="screen" />
    <script src="../../js/jquery-1.3.2.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/jquery-effect.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../js/main.js" type="text/javascript" charset="utf-8"></script>
</head>

<body>     
    <div class="banner">
        <h1>
            <span class="type">Module</span> 
            Paperclip::Interpolations 
            
        </h1>
        <ul class="files">
            
            <li><a href="../../files/lib/paperclip/interpolations_rb.html">lib/paperclip/interpolations.rb</a></li>
            
        </ul>
    </div>
    <div id="bodyContent">
        <div id="content">
    
    <div class="description">
        <p>
This module contains all the methods that are available for interpolation
in paths and urls. To add your own (or override an existing one), you can
either open this module and define it, or call the <a
href="../Paperclip.html#M000170">Paperclip.interpolates</a> method.
</p>

    </div>
    

    

    
    

    
    
    <div class="sectiontitle">Methods</div>
    <dl class="methods">
    
        <dt>#</dt>
        <dd>
            <ul>
                
                <li><a href="#M000032">[]</a>,</li>
                
                <li><a href="#M000029">[]=</a></li>
                
            </ul>
        </dd>
    
        <dt>A</dt>
        <dd>
            <ul>
                
                <li><a href="#M000033">all</a>,</li>
                
                <li><a href="#M000055">attachment</a></li>
                
            </ul>
        </dd>
    
        <dt>B</dt>
        <dd>
            <ul>
                
                <li><a href="#M000049">basename</a></li>
                
            </ul>
        </dd>
    
        <dt>C</dt>
        <dd>
            <ul>
                
                <li><a href="#M000046">class</a></li>
                
            </ul>
        </dd>
    
        <dt>E</dt>
        <dd>
            <ul>
                
                <li><a href="#M000052">extension</a></li>
                
            </ul>
        </dd>
    
        <dt>F</dt>
        <dd>
            <ul>
                
                <li><a href="#M000035">filename</a></li>
                
            </ul>
        </dd>
    
        <dt>I</dt>
        <dd>
            <ul>
                
                <li><a href="#M000053">id</a>,</li>
                
                <li><a href="#M000054">id_partition</a>,</li>
                
                <li><a href="#M000034">interpolate</a></li>
                
            </ul>
        </dd>
    
        <dt>R</dt>
        <dd>
            <ul>
                
                <li><a href="#M000045">rails_env</a>,</li>
                
                <li><a href="#M000044">rails_root</a></li>
                
            </ul>
        </dd>
    
        <dt>S</dt>
        <dd>
            <ul>
                
                <li><a href="#M000058">style</a></li>
                
            </ul>
        </dd>
    
        <dt>T</dt>
        <dd>
            <ul>
                
                <li><a href="#M000039">timestamp</a></li>
                
            </ul>
        </dd>
    
        <dt>U</dt>
        <dd>
            <ul>
                
                <li><a href="#M000038">url</a></li>
                
            </ul>
        </dd>
    
    </dl>
    

    

    

    

    

    

    
            <div class="sectiontitle">Class Public methods</div>
            
            <div class="method">
                <div class="title" id="M000032">
                    
                    <a name="M000032"></a><b>[]</b>(name)
                    
                </div>
                
                <div class="description">
                  <p>
Hash access of interpolations. Included only for compatability, and is not
intended for normal use.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000032_source')" id="l_M000032_source">show</a>
                        
                    </p>
                    <div id="M000032_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File lib/paperclip/interpolations.rb, line 17</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-operator">[]</span> <span class="ruby-identifier">name</span>
      <span class="ruby-identifier">method</span>(<span class="ruby-identifier">name</span>)
    <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000029">
                    
                    <a name="M000029"></a><b>[]=</b>(name, block)
                    
                </div>
                
                <div class="description">
                  <p>
Hash assignment of interpolations. Included only for compatability, and is
not intended for normal use.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000029_source')" id="l_M000029_source">show</a>
                        
                    </p>
                    <div id="M000029_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File lib/paperclip/interpolations.rb, line 11</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-operator">[]=</span> <span class="ruby-identifier">name</span>, <span class="ruby-identifier">block</span>
      <span class="ruby-identifier">define_method</span>(<span class="ruby-identifier">name</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
    <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000033">
                    
                    <a name="M000033"></a><b>all</b>()
                    
                </div>
                
                <div class="description">
                  <p>
Returns a sorted list of all interpolations.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000033_source')" id="l_M000033_source">show</a>
                        
                    </p>
                    <div id="M000033_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File lib/paperclip/interpolations.rb, line 22</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">all</span>
      <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">instance_methods</span>(<span class="ruby-keyword kw">false</span>).<span class="ruby-identifier">sort</span>
    <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000034">
                    
                    <a name="M000034"></a><b>interpolate</b>(pattern, *args)
                    
                </div>
                
                <div class="description">
                  <p>
Perform the actual interpolation. Takes the pattern to interpolate and the
arguments to pass, which are the attachment and style name.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000034_source')" id="l_M000034_source">show</a>
                        
                    </p>
                    <div id="M000034_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File lib/paperclip/interpolations.rb, line 28</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">interpolate</span> <span class="ruby-identifier">pattern</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>
      <span class="ruby-identifier">all</span>.<span class="ruby-identifier">reverse</span>.<span class="ruby-identifier">inject</span>( <span class="ruby-identifier">pattern</span>.<span class="ruby-identifier">dup</span> ) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">result</span>, <span class="ruby-identifier">tag</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">result</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-node">/:#{tag}/</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">match</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">send</span>( <span class="ruby-identifier">tag</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span> )
        <span class="ruby-keyword kw">end</span>
      <span class="ruby-keyword kw">end</span>
    <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="sectiontitle">Instance Public methods</div>
            
            <div class="method">
                <div class="title" id="M000055">
                    
                    <a name="M000055"></a><b>attachment</b>(attachment, style)
                    
                </div>
                
                <div class="description">
                  <p>
Returns the pluralized form of the attachment name. e.g.
&#8220;avatars&#8221; for an attachment of :avatar
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000055_source')" id="l_M000055_source">show</a>
                        
                    </p>
                    <div id="M000055_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File lib/paperclip/interpolations.rb, line 99</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attachment</span> <span class="ruby-identifier">attachment</span>, <span class="ruby-identifier">style</span>
      <span class="ruby-identifier">attachment</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">downcase</span>.<span class="ruby-identifier">pluralize</span>
    <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000049">
                    
                    <a name="M000049"></a><b>basename</b>(attachment, style)
                    
                </div>
                
                <div class="description">
                  <p>
Returns the basename of the file. e.g. &#8220;file&#8221; for
&#8220;file.jpg&#8220;
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000049_source')" id="l_M000049_source">show</a>
                        
                    </p>
                    <div id="M000049_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File lib/paperclip/interpolations.rb, line 74</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">basename</span> <span class="ruby-identifier">attachment</span>, <span class="ruby-identifier">style</span>
      <span class="ruby-identifier">attachment</span>.<span class="ruby-identifier">original_filename</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-node">/#{File.extname(attachment.original_filename)}$/</span>, <span class="ruby-value str">&quot;&quot;</span>)
    <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000046">
                    
                    <a name="M000046"></a><b>class</b>(attachment = nil, style = nil)
                    
                </div>
                
                <div class="description">
                  <p>
Returns the underscored, pluralized version of the class name. e.g.
&#8220;users&#8221; for the User class. NOTE: The arguments need to be
optional, because some tools fetch all class names. Calling <a
href="Interpolations.html#M000046">class</a> will return the expected
class.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000046_source')" id="l_M000046_source">show</a>
                        
                    </p>
                    <div id="M000046_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File lib/paperclip/interpolations.rb, line 68</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">class</span> <span class="ruby-identifier">attachment</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">style</span> = <span class="ruby-keyword kw">nil</span>
      <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">super</span>() <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">attachment</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">style</span>.<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">attachment</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">underscore</span>.<span class="ruby-identifier">pluralize</span>
    <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000052">
                    
                    <a name="M000052"></a><b>extension</b>(attachment, style)
                    
                </div>
                
                <div class="description">
                  <p>
Returns the extension of the file. e.g. &#8220;jpg&#8221; for
&#8220;file.jpg&#8220; If the style has a format defined, it will return
the format instead of the actual extension.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000052_source')" id="l_M000052_source">show</a>
                        
                    </p>
                    <div id="M000052_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File lib/paperclip/interpolations.rb, line 81</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">extension</span> <span class="ruby-identifier">attachment</span>, <span class="ruby-identifier">style</span> 
      ((<span class="ruby-identifier">style</span> = <span class="ruby-identifier">attachment</span>.<span class="ruby-identifier">styles</span>[<span class="ruby-identifier">style</span>]) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">style</span>[<span class="ruby-identifier">:format</span>]) <span class="ruby-operator">||</span>
        <span class="ruby-constant">File</span>.<span class="ruby-identifier">extname</span>(<span class="ruby-identifier">attachment</span>.<span class="ruby-identifier">original_filename</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/^\.+/</span>, <span class="ruby-value str">&quot;&quot;</span>)
    <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000035">
                    
                    <a name="M000035"></a><b>filename</b>(attachment, style)
                    
                </div>
                
                <div class="description">
                  <p>
Returns the filename, the same way as &#8220;:basename.:extension&#8221;
would.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000035_source')" id="l_M000035_source">show</a>
                        
                    </p>
                    <div id="M000035_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File lib/paperclip/interpolations.rb, line 37</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">filename</span> <span class="ruby-identifier">attachment</span>, <span class="ruby-identifier">style</span>
      <span class="ruby-node">&quot;#{basename(attachment, style)}.#{extension(attachment, style)}&quot;</span>
    <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000053">
                    
                    <a name="M000053"></a><b>id</b>(attachment, style)
                    
                </div>
                
                <div class="description">
                  <p>
Returns the id of the instance.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000053_source')" id="l_M000053_source">show</a>
                        
                    </p>
                    <div id="M000053_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File lib/paperclip/interpolations.rb, line 87</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">id</span> <span class="ruby-identifier">attachment</span>, <span class="ruby-identifier">style</span>
      <span class="ruby-identifier">attachment</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">id</span>
    <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000054">
                    
                    <a name="M000054"></a><b>id_partition</b>(attachment, style)
                    
                </div>
                
                <div class="description">
                  <p>
Returns the id of the instance in a split path form. e.g. returns
000/001/234 for an id of 1234.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000054_source')" id="l_M000054_source">show</a>
                        
                    </p>
                    <div id="M000054_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File lib/paperclip/interpolations.rb, line 93</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">id_partition</span> <span class="ruby-identifier">attachment</span>, <span class="ruby-identifier">style</span>
      (<span class="ruby-value str">&quot;%09d&quot;</span> <span class="ruby-operator">%</span> <span class="ruby-identifier">attachment</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/\d{3}/</span>).<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;/&quot;</span>)
    <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000045">
                    
                    <a name="M000045"></a><b>rails_env</b>(attachment, style)
                    
                </div>
                
                <div class="description">
                  <p>
Returns the RAILS_ENV constant.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000045_source')" id="l_M000045_source">show</a>
                        
                    </p>
                    <div id="M000045_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File lib/paperclip/interpolations.rb, line 60</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rails_env</span> <span class="ruby-identifier">attachment</span>, <span class="ruby-identifier">style</span>
      <span class="ruby-constant">RAILS_ENV</span>
    <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000044">
                    
                    <a name="M000044"></a><b>rails_root</b>(attachment, style)
                    
                </div>
                
                <div class="description">
                  <p>
Returns the RAILS_ROOT constant.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000044_source')" id="l_M000044_source">show</a>
                        
                    </p>
                    <div id="M000044_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File lib/paperclip/interpolations.rb, line 55</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rails_root</span> <span class="ruby-identifier">attachment</span>, <span class="ruby-identifier">style</span>
      <span class="ruby-constant">RAILS_ROOT</span>
    <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000058">
                    
                    <a name="M000058"></a><b>style</b>(attachment, style)
                    
                </div>
                
                <div class="description">
                  <p>
Returns the style, or the default style if nil is supplied.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000058_source')" id="l_M000058_source">show</a>
                        
                    </p>
                    <div id="M000058_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File lib/paperclip/interpolations.rb, line 104</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">style</span> <span class="ruby-identifier">attachment</span>, <span class="ruby-identifier">style</span>
      <span class="ruby-identifier">style</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">attachment</span>.<span class="ruby-identifier">default_style</span>
    <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000039">
                    
                    <a name="M000039"></a><b>timestamp</b>(attachment, style)
                    
                </div>
                
                <div class="description">
                  <p>
Returns the timestamp as defined by the <attachment>_updated_at field
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000039_source')" id="l_M000039_source">show</a>
                        
                    </p>
                    <div id="M000039_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File lib/paperclip/interpolations.rb, line 50</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">timestamp</span> <span class="ruby-identifier">attachment</span>, <span class="ruby-identifier">style</span>
      <span class="ruby-identifier">attachment</span>.<span class="ruby-identifier">instance_read</span>(<span class="ruby-identifier">:updated_at</span>).<span class="ruby-identifier">to_s</span>
    <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
            <div class="method">
                <div class="title" id="M000038">
                    
                    <a name="M000038"></a><b>url</b>(attachment, style)
                    
                </div>
                
                <div class="description">
                  <p>
Returns the interpolated URL. Will raise an error if the url itself
contains &#8220;:url&#8221; to prevent infinite recursion. This
interpolation is used in the default :path to ease default specifications.
</p>

                </div>
                
                
                
                
                <div class="sourcecode">
                    <p class="source-link">
                        Source: <a href="javascript:toggleSource('M000038_source')" id="l_M000038_source">show</a>
                        
                    </p>
                    <div id="M000038_source" class="dyn-source">
                        <pre><span class="ruby-comment cmt"># File lib/paperclip/interpolations.rb, line 44</span>
    <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">url</span> <span class="ruby-identifier">attachment</span>, <span class="ruby-identifier">style</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">InfiniteInterpolationError</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">attachment</span>.<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:url</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-value str">&quot;:url&quot;</span>)
      <span class="ruby-identifier">attachment</span>.<span class="ruby-identifier">url</span>(<span class="ruby-identifier">style</span>, <span class="ruby-keyword kw">false</span>)
    <span class="ruby-keyword kw">end</span></pre>
                    </div>
                </div>
                
            </div>
            
</div>
    </div>
  </body>
</html>    